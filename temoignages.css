:root{
  --charte-bleu-1: #002666;
  --glass: rgba(255,255,255,0.06);
  --glass-strong: rgba(255,255,255,0.08);
  --paper-bg: #FF3033;
  --paper-accent: #FF3033;
  --ink: #ffffff;
  --muted: #ffffff;
  --accent: #000000;
  --card-w: 760px;
  --radius: 14px;
  --ease: cubic-bezier(.2,.9,.3,1);
}

*{box-sizing:border-box}
html,body{
  height:100%;
  margin:0;
  font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;
  -webkit-font-smoothing:antialiased;
  background: var(--charte-bleu-1);
  color:var(--ink);
  overflow:hidden;
}

#bgCanvas{
  position:fixed;
  inset:0;
  z-index:0;
  width:100%;
  height:100%;
  display:block;
  background: transparent;
}

#ui{
  position:fixed;
  left:50%;
  top:18px;
  transform:translateX(-50%);
  z-index:70;
  display:flex;
  gap:12px;
  align-items:center;
  padding:8px;
  border-radius:999px;
  background: linear-gradient(180deg, rgba(42,9,119,0.04), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 8px 30px rgba(1,12,22,0.45), 0 1px 0 rgba(255,255,255,0.02) inset;
  backdrop-filter: blur(6px) saturate(1.05);
}
#ui button{
  border:0;
  background:transparent;
  color:#fff;
  font-weight:600;
  padding:8px 12px;
  border-radius:10px;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  gap:8px;
  transition: transform .18s var(--ease), background .18s var(--ease), box-shadow .18s var(--ease);
}
#ui button:hover{ transform:translateY(-3px); background: rgba(255,255,255,0.03); box-shadow:0 6px 20px rgba(0,0,0,0.35) }
#indicator{
  font-size:14px;
  color: #e6f7f3;
  padding:6px 10px;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.03);
  box-shadow: 0 4px 14px rgba(0,0,0,0.28);
}

#bookRoot{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%) rotateX(-14deg) scale(0.98);
  width: var(--card-w);
  height:920px;
  z-index:60;
  pointer-events:auto;
  transition: transform .7s var(--ease), filter .4s ease, opacity .3s ease;
  perspective:1400px;
  -webkit-perspective:1400px;
}

.book{ width:100%; height:100%; transform-style:preserve-3d; margin:0 auto; position:relative }
.stack{ position:relative; width:100%; height:100%; transform-style:preserve-3d }

.page{
  position:absolute; left:0; top:0; width:100%; height:100%;
  background: linear-gradient(180deg,var(--paper-bg),var(--paper-accent));
  border-radius: var(--radius);
  box-shadow:
    0 30px 80px rgba(2,8,18,0.55),
    inset 0 8px 18px rgba(255,255,255,0.72),
    0 6px 22px rgba(0,0,0,0.12);
  transform-origin: left center;
  backface-visibility: hidden;
  display:flex; flex-direction:column; overflow:auto; padding:28px 36px;
  transition: transform .86s var(--ease), box-shadow .28s var(--ease), filter .28s var(--ease);
  will-change: transform;
  color:var(--ink); font-size:15px;
  border: 1px solid rgba(0,0,0,0.04);
}

.page:hover{ transform: translateZ(6px) rotateX(-0.6deg) }

.page.turned{
  transform: translateX(-8%) rotateY(-180deg) translateZ(-6px);
  box-shadow: 0 12px 36px rgba(0,0,0,0.30);
  filter: saturate(.98) contrast(0.98);
}
.page.turned::after{
  content:"";
  position:absolute; inset:0; border-radius:inherit;
  background: linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.04));
  pointer-events:none;
}

.entryForm{ display:flex; flex-direction:column; gap:12px }
.entryText{
  width:100%;
  resize:vertical;
  min-height:220px;
  padding:14px;
  border-radius:10px;
  border:1px solid rgba(2,15,11,0.06);
  font-size:15px;
  font-family:inherit;
  background: linear-gradient(180deg,#ffffff,#fbfbf8);
  box-shadow: 0 6px 18px rgba(6,80,60,0.03) inset;
}
.formRow{ display:flex; gap:10px; align-items:center }
.author{
  flex:1;
  padding:10px 12px;
  border-radius:10px;
  border:1px solid rgba(2,15,11,0.06);
  background: linear-gradient(180deg,#fff,#fbfbf8);
}
.submitBtn{
  padding:10px 14px; border-radius:10px; border:0;
  background: linear-gradient(180deg,var(--accent), #000000);
  color:#fff; font-weight:700; cursor:pointer;
  box-shadow: 0 8px 20px rgba(11,86,75,0.26);
  transition: transform .15s var(--ease), box-shadow .15s var(--ease);
}
.submitBtn:hover{ transform: translateY(-3px); box-shadow: 0 14px 30px rgba(11,86,75,0.34) }

.display{ font-size:15px; line-height:1.65; color:var(--ink) }
.display .meta{ margin-top:14px; font-size:13px; color:var(--muted) }

.page.added{
  animation: popIn .42s var(--ease);
}
@keyframes popIn{
  0%{ transform: scale(.96) rotateX(-6deg) translateZ(-6px); opacity:0 }
  60%{ transform: scale(1.02) rotateX(-3deg) translateZ(6px); opacity:1 }
  100%{ transform: scale(1) rotateX(-0.6deg) translateZ(0) }
}

.page::-webkit-scrollbar{ width:10px }
.page::-webkit-scrollbar-thumb{ background: linear-gradient(180deg,#d9cfae,#bfb396); border-radius:8px }

.visually-hidden{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0 }

.hint{ position:fixed; left:14px; bottom:14px; background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); padding:8px 12px; border-radius:10px; color:#fff; z-index:60; font-size:13px; box-shadow:0 8px 30px rgba(0,0,0,0.35) }

@media (max-width:1000px){ :root{ --card-w: 620px } #bookRoot{ height:760px } }
@media (max-width:700px){ :root{ --card-w: 420px } #bookRoot{ height:600px; transform:translate(-50%,-50%) rotateX(-10deg) scale(.96) } .entryText{ min-height:140px } }
